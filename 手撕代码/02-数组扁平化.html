<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    var arr = [1, [2, [3, [4]]], 5, 6, [7, [8]]]
    let newArr = []
    var newArr1 = []
    // 1.flat(Infinity)
    newArr = arr.flat(Infinity)

    // 2.正则表达式去括号
    newArr = JSON.stringify(arr).replace((/\[|]/g), "")
    newArr = '[' + newArr + ']'
    newArr = JSON.parse(newArr)

    // 3.reduce
    const flatten = arr => {
      return arr.reduce((pre, cur) => {
        console.log(pre);
        console.log(cur);
        return pre.concat(Array.isArray(cur) ? flatten(cur) : cur)
      }, [])
    }

    // 4.函数递归 + push
    const diFun = arr => {
      for (let i = 0; i < arr.length; i++) {
        if (Array.isArray(arr[i])) {
          diFun(arr[i])
        } else {
          newArr1.push(arr[i])
        }
      }
      return newArr1
    }

    // console.log(flatten(newArr))
    console.log(flatten(arr))

  </script>
</body>

</html>